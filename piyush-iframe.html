<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- <link rel="stylesheet" href="https://interface-embed.viasocket.com/style.css"> -->
    <style>
        .active-button {
            background-color: #4CAF50;
            color: white;
            font-weight: bold;
            border: 2px solid #45a049;
        }
    </style>
    <script type="text/javascript" src="http://localhost:3001/chat-widget-local.js"></script>
    <!-- <script type="text/javascript" src="http://localhost:3001/chat-widget-local.js"></script> -->
    <!-- <script type="text/javascript" src="https://ctest.msg91.com/chat-widget.js"></script> -->
    <!-- <script type="text/javascript" src="https://control.msg91.com/app/assets/widget/chat-widget.js"></script> -->


    <!-- <script id="chatbot-main-script" src="http://localhost:3001/chatbot-local.js"
        embedToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJvcmdfaWQiOiIxMjg5IiwiY2hhdGJvdF9pZCI6IjY2NTk2YWU3ZjA0NGRlNzMzZTNlYzdlYiIsInVzZXJfaWQiOiJwYXJha2gifQ.ol_XuciFvI8fvDLPKJRQSSp08qEkWOIzU3zSps98a0I"
        bridgeName="sdk" threadId="MobileSdk" parentId="rectanglee" fullScreen="false" defaultOpen="true"
        hideCloseButton="false"></script> -->
</head>

<body>

    <button onclick="anoumousWidget1(); highlightButton(this)">Login Anoumous widget 1</button>
    <button onclick="anoumousWidget2(); highlightButton(this)">Login Anoumous widget 2</button>
    <button onclick="logoutWidget1(); highlightButton(this)">Logout widget 1</button>
    <button onclick="logoutWidget2(); highlightButton(this)">Logout widget 2</button>
    <button onclick="userWidget1(); highlightButton(this)">Login User widget 1</button>
    <button onclick="userWidget2(); highlightButton(this)">Login User widget 2</button>
    <button onclick="changeUrl('/new-path')">Go to New Page</button>

    <div style="display: flex; gap: 20px;">
        <div id="rectangle"
            style="width: 300px; height: 800px; background-color: #f0f0f0; border: 1px solid #ccc; margin: 20px; padding: 10px;">
            <p>This is a rectangle div with an ID</p>
        </div>

        <div id="rectangle2"
            style="width: 400px; height: 800px; background-color: #f0f0f0; border: 1px solid #ccc; margin: 20px; padding: 10px;">
            <!-- <p>This is a rectangle div with an ID</p> -->
            <iframe id="chat-iframe" style="width: 100%; height: 100%; border: none;"></iframe>
        </div>
    </div>

    <script type="text/javascript">
        window.addEventListener('DOMContentLoaded', function () {
            const iframe = document.getElementById("chat-iframe");

            const html = `
    <!DOCTYPE html>
    <html>
    <body>
        <script>
            document.cookie = 'hello-widget-uuid=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';
            const script = document.createElement('script');
            script.onload = function () {
                initChatWidget({
                    widgetToken: 'fd59f',
                    hide_launcher: false,
                    launch_widget: true,
                    show_widget_form: false,
                    hide_upload: true,
                    bot_type: 'custom',
                    bot_id: 752
                }, 0);
            };
            script.src = 'http://localhost:3001/chat-widget-local.js';
            document.body.appendChild(script);
                    <\/script>
                </body >
                </html >
            `;

            iframe.srcdoc = html;
        });
    </script>

    <!-- 
    <script>
        function anoumousWidget1() {
            // window.SendDataToChatbot({ parentId: "rectangle2", fullScreen: true })
            if (document.head) {
                const scriptElement = document.getElementById('chatbot-main-script');
                if (scriptElement) {
                    scriptElement.parentNode.removeChild(scriptElement);
                }
            }
        }
    </script>
    <script>
        function anoumousWidget2() {
            // Add the script element again
            const newScript = document.createElement('script');
            newScript.id = 'chatbot-main-script';
            newScript.src = 'http://localhost:3001/chatbot-local.js';
            newScript.setAttribute('embedToken', 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJvcmdfaWQiOiIxMjg5IiwiY2hhdGJvdF9pZCI6IjY2NTk2YWU3ZjA0NGRlNzMzZTNlYzdlYiIsInVzZXJfaWQiOiJwYXJha2gifQ.ol_XuciFvI8fvDLPKJRQSSp08qEkWOIzU3zSps98a0I');
            newScript.setAttribute('bridgeName', 'sdk');
            newScript.setAttribute('threadId', 'MobileSdk');
            newScript.setAttribute('parentId', 'rectangle2');
            newScript.setAttribute('fullScreen', 'true');
            document.head.appendChild(newScript);
        }
    </script> -->



    <!-- <script>
        function anoumousWidget1() {
            // Remove the chat widget script if it exists
            // if (document.head) {
            //     const scriptElement = document.querySelector('script[src="http://localhost:3001/chat-widget-local.js"]');
            //     if (scriptElement) {
            //         scriptElement.parentNode.removeChild(scriptElement);
            //     }
            // }
            window.chatbot.open()
            window.chatbot.sendData({
                "threadId": "MobileSdk"
            })
        }
    </script>
    <script>
        function anoumousWidget2() {
            // Check if script already exists
            // const existingScript = document.querySelector('script[src="http://localhost:3001/chat-widget-local.js"]');
            // if (!existingScript) {
            //     // Add the chat widget script
            //     const newScript = document.createElement('script');
            //     newScript.type = 'text/javascript';
            //     newScript.src = 'http://localhost:3001/chat-widget-local.js';
            //     document.head.appendChild(newScript);
            // }
            window.chatbot.sendData({
                "threadId": "hello"
            })
        }
    </script> -->




    <!-- <script type="text/javascript" src="http://localhost:3001/chat-widget-local.js"></script> -->
    <!-- <script type="text/javascript" src="https://blacksea.msg91.com/chat-widget.js"></script> -->
    <!-- <script type="text/javascript" src="http://localhost:3001/chat-widget-local.js"></script> -->
    <script type="text/javascript">
        var helloConfig = {
            widgetToken: "fd59f", // (parakh = test)
            // widgetToken: "8bf56", // ( test )
            // widgetToken: "ec5d6", // testingprod ( prod )
            // widgetToken: "d1bc7", // testing rudra ( prod )
            // widgetToken: "45d7f", //
            launch_widget: true,
            // name: "Rudra",
            // mail: "parakhjain2301@gmail.com",
            // number: '9826000001',
            // Test: "hello1123",
            // unique_id: "testing1",
        };

        function anoumousWidget1() {
            initChatWidget({ widgetToken: "8bf56", launch_widget: true });
            // window.Chatbot.sendData({
            //     // variables: { 'name': 'Raju' },
            //     // version_id: "v1",
            //     threadId: "1232",
            // })
        }

        function anoumousWidget2() {
            initChatWidget({ ...helloConfig, widgetToken: "fd59f", launch_widget: true, unique_id: "Raju36" });
            // initChatWidget({ ...helloConfig, unique_id: "Raju2", launch_widget: true });
        }

        function init() {
            initChatWidget(helloConfig);
        }

        function userWidget1() {
            initChatWidget({ ...helloConfig, widgetToken: "fd59f", mail: "sahil@viasockett.com", number: "+919826000001", name: "Sahill", unique_id: "sahil112333" });
        }

        function userWidget2() {
            initChatWidget({ ...helloConfig, widgetToken: "068e9", mail: "sahil@viasockett.com", number: "+919826000001", name: "Sahill", unique_id: "sahil1124" });
        }

        function logoutWidget1() {
            initChatWidget({ widgetToken: "fd59f" });
        }

        function logoutWidget2() {
            initChatWidget({ widgetToken: "068e9" });
        }

        function highlightButton(clickedButton) {
            // Remove active class from all buttons
            var buttons = document.querySelectorAll('button');
            buttons.forEach(function (button) {
                button.classList.remove('active-button');
            });

            // Add active class to clicked button
            clickedButton.classList.add('active-button');
        }

        // initChatWidget(helloConfig);
        initChatWidget({ widgetToken: "8bf56" });

        window.onload = function () {
            document.querySelector('button').classList.add('active-button');
        };

        function changeUrl(path) {
            if (window.location.pathname !== path) {
                history.pushState({}, '', path);
                // Optional: trigger custom event or handle SPA routing
            }
        }
    </script>
</body>

</html>